{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\a_kyl\\\\Documents\\\\GitHub\\\\8bitgalaxy\\\\src\\\\components\\\\ui\\\\StarView.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport styled from \"styled-components\";\nimport usePosition from \"../../state/hooks/usePosition\";\nimport CardView from \"./CardView\";\nimport { observer } from \"mobx-react-lite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst View = styled.div`\n  left: ${({\n  left\n}) => left + \"px\"};\n  top: ${({\n  top\n}) => top + \"px\"};\n`;\n_c = View;\nconst OverView = styled.div`\n  border-width: 1px;\n  border-style: solid;\n\n  &:before, &:after {\n    border-width: 1px;\n    border-style: solid;\n  }\n`;\n_c2 = OverView;\n\nconst StarView = ({\n  star\n}) => {\n  _s();\n\n  const [, m] = usePosition();\n  const indent = star.y % 2 ? 0 : 7.75 * m;\n  const [{\n    isOver,\n    canDrop\n  }, drop] = useDrop(() => ({\n    accept: \"CARD\",\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  }), [star]);\n  let isActive = isOver && canDrop;\n  let opacity = 1;\n\n  if (isActive) {\n    opacity = 0.5;\n  }\n\n  return /*#__PURE__*/_jsxDEV(View, {\n    className: \"Star\",\n    left: star.x * m * 15.5 + indent,\n    top: star.y * m * 13.4 + m,\n    children: [/*#__PURE__*/_jsxDEV(OverView, {\n      className: \"hexagon\",\n      ref: drop,\n      style: {\n        opacity\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inner lni lni-sun\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.base(0),\n      y: 3,\n      x: 0,\n      slot: 0,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.base(1),\n      y: 4,\n      x: 0,\n      slot: 1,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.base(2),\n      y: 5,\n      x: 0,\n      slot: 2,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.ship(0),\n      y: 6,\n      x: 0,\n      slot: 0,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.ship(1),\n      y: 6,\n      x: 1,\n      slot: 1,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.ship(2),\n      y: 6,\n      x: 2,\n      slot: 2,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.ship(3),\n      y: 6,\n      x: 3,\n      slot: 3,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.colony(0),\n      y: 3,\n      x: 8,\n      slot: 0,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.colony(1),\n      y: 4,\n      x: 8,\n      slot: 1,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.colony(2),\n      y: 5,\n      x: 8,\n      slot: 2,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.hero(0),\n      y: 7,\n      x: 7,\n      slot: 0,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.hero(1),\n      y: 8,\n      x: 7,\n      slot: 1,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.hero(2),\n      y: 9,\n      x: 7,\n      slot: 2,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardViewer, {\n      card: star.hero(3),\n      y: 10,\n      x: 7,\n      slot: 3,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StarView, \"oeXWtrKx7cFF+myK98IagK/bXGs=\", false, function () {\n  return [usePosition, useDrop];\n});\n\n_c3 = StarView;\nconst CardViewer = observer(_c4 = ({\n  card,\n  y,\n  x,\n  slot,\n  isActive,\n  star\n}) => {\n  if (card.isAbsent) {\n    return /*#__PURE__*/_jsxDEV(Slot, {\n      y: y,\n      x: x,\n      card: card,\n      slot: slot,\n      isActive: isActive,\n      star: star\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(CardView, {\n    card: card,\n    y: y + 0.8,\n    x: x + 0.8\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n});\n_c5 = CardViewer;\nconst SlotView = styled.div`\n  position: absolute;\n  border-width: 4px;\n  border-style: solid;\n  top: ${({\n  y\n}) => y + \"px\"};\n  left: ${({\n  x\n}) => x + \"px\"};\n  z-index: 2;\n  border-radius: 20px;\n  width: 300px;\n  height: 200px;\n`;\n_c6 = SlotView;\nconst Slot = observer(_c7 = _s2(({\n  name,\n  star,\n  y,\n  x,\n  card,\n  slot,\n  isActive\n}) => {\n  _s2();\n\n  const [p] = usePosition(y, x);\n  const [{\n    isOver,\n    canDrop\n  }, dropRef] = useDrop(() => ({\n    accept: \"CARD\",\n    drop: (item, monitor) => {\n      let a = monitor.getItem(); // const parent = getParent(item.card, 2);\n      // parent.remove(item.card);\n\n      if (item.card.Type === card.Name) {\n        item.card.destination.removeCard(item.card);\n        star.put(item.card, slot);\n      }\n\n      return {\n        place: star,\n        name: name\n      };\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver() // canDrop:!!monitor.canDrop()\n\n    })\n  }), [x, y]);\n  const isActiveSlot = isOver;\n  let borderColor = \"transparent\";\n\n  if (isActiveSlot) {\n    borderColor = \"red\";\n  } else if (canDrop && isActive) {\n    borderColor = \"white\";\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(SlotView, {\n    ref: dropRef,\n    className: card.Name,\n    y: p.y - 0,\n    x: 18 + p.x,\n    isOver: isOver,\n    style: {\n      borderColor: borderColor\n    } // style={isOver && !isActive ?{borderColor: 'white'}:{borderColor: 'transparent'}}\n\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this) //  <SlotView ref={dropRef} className={name} y={p.y - 94} x={18 + p.x} isOver={isOver} />\n  ;\n}, \"mA1QUTFI3Q5PLEyVHkEgAYpTOjQ=\", false, function () {\n  return [usePosition, useDrop];\n}));\n_c8 = Slot;\nexport default _c9 = observer(StarView);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"View\");\n$RefreshReg$(_c2, \"OverView\");\n$RefreshReg$(_c3, \"StarView\");\n$RefreshReg$(_c4, \"CardViewer$observer\");\n$RefreshReg$(_c5, \"CardViewer\");\n$RefreshReg$(_c6, \"SlotView\");\n$RefreshReg$(_c7, \"Slot$observer\");\n$RefreshReg$(_c8, \"Slot\");\n$RefreshReg$(_c9, \"%default%\");","map":{"version":3,"sources":["C:/Users/a_kyl/Documents/GitHub/8bitgalaxy/src/components/ui/StarView.js"],"names":["React","useState","useDrop","styled","usePosition","CardView","observer","View","div","left","top","OverView","StarView","star","m","indent","y","isOver","canDrop","drop","accept","collect","monitor","isActive","opacity","x","base","ship","colony","hero","CardViewer","card","slot","isAbsent","SlotView","Slot","name","p","dropRef","item","a","getItem","Type","Name","destination","removeCard","put","place","isActiveSlot","borderColor"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,OAAR,QAAsB,WAAtB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,QAAR,QAAuB,iBAAvB;;AAEA,MAAMC,IAAI,GAAGJ,MAAM,CAACK,GAAI;AACxB,UAAU,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAYA,IAAI,GAAG,IAAK;AAClC,SAAS,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAWA,GAAG,GAAG,IAAK;AAC/B,CAHA;KAAMH,I;AAKN,MAAMI,QAAQ,GAAGR,MAAM,CAACK,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARA;MAAMG,Q;;AAUN,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAY;AAAA;;AAC3B,QAAM,GAAGC,CAAH,IAAQV,WAAW,EAAzB;AACA,QAAMW,MAAM,GAAGF,IAAI,CAACG,CAAL,GAAS,CAAT,GAAa,CAAb,GAAiB,OAAOF,CAAvC;AACA,QAAM,CAAC;AAAEG,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAD,EAAqBC,IAArB,IAA6BjB,OAAO,CAAC,OAAM;AAC/CkB,IAAAA,MAAM,EAAE,MADuC;AAE/CC,IAAAA,OAAO,EAAGC,OAAD,KAAc;AACrBL,MAAAA,MAAM,EAAEK,OAAO,CAACL,MAAR,EADa;AAErBC,MAAAA,OAAO,EAAEI,OAAO,CAACJ,OAAR;AAFY,KAAd;AAFsC,GAAN,CAAD,EAMtC,CAACL,IAAD,CANsC,CAA1C;AAQA,MAAIU,QAAQ,GAAGN,MAAM,IAAIC,OAAzB;AACA,MAAIM,OAAO,GAAG,CAAd;;AACA,MAAID,QAAJ,EAAc;AACZC,IAAAA,OAAO,GAAG,GAAV;AACD;;AAED,sBACE,QAAC,IAAD;AAAM,IAAA,SAAS,EAAE,MAAjB;AAAyB,IAAA,IAAI,EAAEX,IAAI,CAACY,CAAL,GAASX,CAAT,GAAa,IAAb,GAAoBC,MAAnD;AAA2D,IAAA,GAAG,EAAEF,IAAI,CAACG,CAAL,GAASF,CAAT,GAAa,IAAb,GAAoBA,CAApF;AAAA,4BACE,QAAC,QAAD;AAAU,MAAA,SAAS,EAAC,SAApB;AAA8B,MAAA,GAAG,EAAEK,IAAnC;AAAyC,MAAA,KAAK,EAAE;AAACK,QAAAA;AAAD,OAAhD;AAAA,6BACE;AAAA,+BAAM;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA;AAAN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAKE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEX,IAAI,CAACa,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEH,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YALF,eAME,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACa,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEH,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YANF,eAOE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACa,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEH,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAPF,eASE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACc,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEJ,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YATF,eAUE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACc,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEJ,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAVF,eAWE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACc,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEJ,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAXF,eAYE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACc,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEJ,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAZF,eAcE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACe,MAAL,CAAY,CAAZ,CAAlB;AAAkC,MAAA,CAAC,EAAE,CAArC;AAAwC,MAAA,CAAC,EAAE,CAA3C;AAA8C,MAAA,IAAI,EAAE,CAApD;AAAuD,MAAA,QAAQ,EAAEL,QAAjE;AAA2E,MAAA,IAAI,EAAEV;AAAjF;AAAA;AAAA;AAAA;AAAA,YAdF,eAeE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACe,MAAL,CAAY,CAAZ,CAAlB;AAAkC,MAAA,CAAC,EAAE,CAArC;AAAwC,MAAA,CAAC,EAAE,CAA3C;AAA8C,MAAA,IAAI,EAAE,CAApD;AAAuD,MAAA,QAAQ,EAAEL,QAAjE;AAA2E,MAAA,IAAI,EAAEV;AAAjF;AAAA;AAAA;AAAA;AAAA,YAfF,eAgBE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACe,MAAL,CAAY,CAAZ,CAAlB;AAAkC,MAAA,CAAC,EAAE,CAArC;AAAwC,MAAA,CAAC,EAAE,CAA3C;AAA8C,MAAA,IAAI,EAAE,CAApD;AAAuD,MAAA,QAAQ,EAAEL,QAAjE;AAA2E,MAAA,IAAI,EAAEV;AAAjF;AAAA;AAAA;AAAA;AAAA,YAhBF,eAkBE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACgB,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEN,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAlBF,eAmBE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACgB,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEN,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YAnBF,eAoBE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACgB,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,CAAnC;AAAsC,MAAA,CAAC,EAAE,CAAzC;AAA4C,MAAA,IAAI,EAAE,CAAlD;AAAqD,MAAA,QAAQ,EAAEN,QAA/D;AAAyE,MAAA,IAAI,EAAEV;AAA/E;AAAA;AAAA;AAAA;AAAA,YApBF,eAqBE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEA,IAAI,CAACgB,IAAL,CAAU,CAAV,CAAlB;AAAgC,MAAA,CAAC,EAAE,EAAnC;AAAuC,MAAA,CAAC,EAAE,CAA1C;AAA6C,MAAA,IAAI,EAAE,CAAnD;AAAsD,MAAA,QAAQ,EAAEN,QAAhE;AAA0E,MAAA,IAAI,EAAEV;AAAhF;AAAA;AAAA;AAAA;AAAA,YArBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAyBD,CA1CD;;GAAMD,Q;UACUR,W,EAEqBF,O;;;MAH/BU,Q;AA4CN,MAAMkB,UAAU,GAAGxB,QAAQ,OAAC,CAAC;AAACyB,EAAAA,IAAD;AAAOf,EAAAA,CAAP;AAAUS,EAAAA,CAAV;AAAaO,EAAAA,IAAb;AAAmBT,EAAAA,QAAnB;AAA6BV,EAAAA;AAA7B,CAAD,KAAwC;AAClE,MAAIkB,IAAI,CAACE,QAAT,EAAmB;AACjB,wBACE,QAAC,IAAD;AAAM,MAAA,CAAC,EAAEjB,CAAT;AAAY,MAAA,CAAC,EAAES,CAAf;AAAkB,MAAA,IAAI,EAAEM,IAAxB;AAA8B,MAAA,IAAI,EAAEC,IAApC;AAA0C,MAAA,QAAQ,EAAET,QAApD;AAA8D,MAAA,IAAI,EAAEV;AAApE;AAAA;AAAA;AAAA;AAAA,YADF;AAGD;;AAAA;AAED,sBACE,QAAC,QAAD;AAAU,IAAA,IAAI,EAAEkB,IAAhB;AAAsB,IAAA,CAAC,EAAEf,CAAC,GAAC,GAA3B;AAAgC,IAAA,CAAC,EAAES,CAAC,GAAC;AAArC;AAAA;AAAA;AAAA;AAAA,UADF;AAGD,CAV0B,CAA3B;MAAMK,U;AAYN,MAAMI,QAAQ,GAAG/B,MAAM,CAACK,GAAI;AAC5B;AACA;AACA;AACA,SAAS,CAAC;AAACQ,EAAAA;AAAD,CAAD,KAASA,CAAC,GAAG,IAAK;AAC3B,UAAU,CAAC;AAACS,EAAAA;AAAD,CAAD,KAASA,CAAC,GAAG,IAAK;AAC5B;AACA;AACA;AACA;AACA,CAVA;MAAMS,Q;AAYN,MAAMC,IAAI,GAAG7B,QAAQ,WAAC,CAAC;AAAE8B,EAAAA,IAAF;AAAQvB,EAAAA,IAAR;AAAcG,EAAAA,CAAd;AAAiBS,EAAAA,CAAjB;AAAoBM,EAAAA,IAApB;AAA0BC,EAAAA,IAA1B;AAAgCT,EAAAA;AAAhC,CAAD,KAAgD;AAAA;;AACpE,QAAM,CAACc,CAAD,IAAMjC,WAAW,CAACY,CAAD,EAAIS,CAAJ,CAAvB;AACA,QAAM,CAAC;AAAER,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAD,EAAsBoB,OAAtB,IAAiCpC,OAAO,CAAC,OAAO;AAClDkB,IAAAA,MAAM,EAAE,MAD0C;AAElDD,IAAAA,IAAI,EAAE,CAACoB,IAAD,EAAOjB,OAAP,KAAmB;AACvB,UAAIkB,CAAC,GAAGlB,OAAO,CAACmB,OAAR,EAAR,CADuB,CAEvB;AACA;;AAEA,UAAIF,IAAI,CAACR,IAAL,CAAUW,IAAV,KAAmBX,IAAI,CAACY,IAA5B,EAAkC;AAChCJ,QAAAA,IAAI,CAACR,IAAL,CAAUa,WAAV,CAAsBC,UAAtB,CAAiCN,IAAI,CAACR,IAAtC;AACAlB,QAAAA,IAAI,CAACiC,GAAL,CAASP,IAAI,CAACR,IAAd,EAAoBC,IAApB;AACD;;AAED,aAAO;AACLe,QAAAA,KAAK,EAAElC,IADF;AAELuB,QAAAA,IAAI,EAAEA;AAFD,OAAP;AAID,KAhBiD;AAiBlDf,IAAAA,OAAO,EAAGC,OAAD,KAAc;AACrBL,MAAAA,MAAM,EAAE,CAAC,CAACK,OAAO,CAACL,MAAR,EADW,CAErB;;AAFqB,KAAd;AAjByC,GAAP,CAAD,EAqBxC,CAACQ,CAAD,EAAIT,CAAJ,CArBwC,CAA9C;AAwBA,QAAMgC,YAAY,GAAG/B,MAArB;AACA,MAAIgC,WAAW,GAAG,aAAlB;;AAEA,MAAID,YAAJ,EAAkB;AAChBC,IAAAA,WAAW,GAAG,KAAd;AACD,GAFD,MAEO,IAAI/B,OAAO,IAAIK,QAAf,EAAyB;AAC9B0B,IAAAA,WAAW,GAAG,OAAd;AACD;;AAAA;AAED,sBACE,QAAC,QAAD;AACE,IAAA,GAAG,EAAEX,OADP;AAEE,IAAA,SAAS,EAAEP,IAAI,CAACY,IAFlB;AAGE,IAAA,CAAC,EAAEN,CAAC,CAACrB,CAAF,GAAM,CAHX;AAIE,IAAA,CAAC,EAAE,KAAKqB,CAAC,CAACZ,CAJZ;AAKE,IAAA,MAAM,EAAER,MALV;AAME,IAAA,KAAK,EAAE;AAAEgC,MAAAA,WAAW,EAAEA;AAAf,KANT,CAOE;;AAPF;AAAA;AAAA;AAAA;AAAA,UADF,CAUE;AAVF;AAYD,CA/CoB;AAAA,UACP7C,WADO,EAEoBF,OAFpB;AAAA,GAArB;MAAMiC,I;AAiDN,qBAAe7B,QAAQ,CAACM,QAAD,CAAvB","sourcesContent":["import React, {useState} from \"react\";\r\nimport {useDrop} from \"react-dnd\";\r\nimport styled from \"styled-components\";\r\nimport usePosition from \"../../state/hooks/usePosition\";\r\nimport CardView from \"./CardView\";\r\nimport {observer} from \"mobx-react-lite\";\r\n\r\nconst View = styled.div`\r\n  left: ${({left}) => left + \"px\"};\r\n  top: ${({top}) => top + \"px\"};\r\n`;\r\n\r\nconst OverView = styled.div`\r\n  border-width: 1px;\r\n  border-style: solid;\r\n\r\n  &:before, &:after {\r\n    border-width: 1px;\r\n    border-style: solid;\r\n  }\r\n`;\r\n\r\nconst StarView = ({star}) => {\r\n  const [, m] = usePosition();\r\n  const indent = star.y % 2 ? 0 : 7.75 * m;\r\n  const [{ isOver, canDrop}, drop] = useDrop(() =>({\r\n    accept: \"CARD\",\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  }), [star]);\r\n\r\n  let isActive = isOver && canDrop;\r\n  let opacity = 1;\r\n  if (isActive) {\r\n    opacity = 0.5;\r\n  }\r\n\r\n  return (\r\n    <View className={\"Star\"} left={star.x * m * 15.5 + indent} top={star.y * m * 13.4 + m}>\r\n      <OverView className=\"hexagon\" ref={drop} style={{opacity}}>\r\n        <span><div className=\"inner lni lni-sun\"/></span>\r\n      </OverView>\r\n\r\n      <CardViewer card={star.base(0)} y={3} x={0} slot={0} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.base(1)} y={4} x={0} slot={1} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.base(2)} y={5} x={0} slot={2} isActive={isActive} star={star}/>\r\n\r\n      <CardViewer card={star.ship(0)} y={6} x={0} slot={0} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.ship(1)} y={6} x={1} slot={1} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.ship(2)} y={6} x={2} slot={2} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.ship(3)} y={6} x={3} slot={3} isActive={isActive} star={star}/>\r\n\r\n      <CardViewer card={star.colony(0)} y={3} x={8} slot={0} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.colony(1)} y={4} x={8} slot={1} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.colony(2)} y={5} x={8} slot={2} isActive={isActive} star={star}/>\r\n\r\n      <CardViewer card={star.hero(0)} y={7} x={7} slot={0} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.hero(1)} y={8} x={7} slot={1} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.hero(2)} y={9} x={7} slot={2} isActive={isActive} star={star}/>\r\n      <CardViewer card={star.hero(3)} y={10} x={7} slot={3} isActive={isActive} star={star}/>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst CardViewer = observer(({card, y, x, slot, isActive, star}) => {\r\n  if (card.isAbsent) {\r\n    return(\r\n      <Slot y={y} x={x} card={card} slot={slot} isActive={isActive} star={star}/>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <CardView card={card} y={y+0.8} x={x+0.8}/>\r\n  );\r\n});\r\n\r\nconst SlotView = styled.div`\r\n  position: absolute;\r\n  border-width: 4px;\r\n  border-style: solid;\r\n  top: ${({y}) => y + \"px\"};\r\n  left: ${({x}) => x + \"px\"};\r\n  z-index: 2;\r\n  border-radius: 20px;\r\n  width: 300px;\r\n  height: 200px;\r\n`;\r\n\r\nconst Slot = observer(({ name, star, y, x, card, slot, isActive }) => {\r\n  const [p] = usePosition(y, x);\r\n  const [{ isOver, canDrop }, dropRef] = useDrop(() => ({\r\n      accept: \"CARD\",\r\n      drop: (item, monitor) => {\r\n        let a = monitor.getItem();\r\n        // const parent = getParent(item.card, 2);\r\n        // parent.remove(item.card);\r\n\r\n        if (item.card.Type === card.Name) {\r\n          item.card.destination.removeCard(item.card);\r\n          star.put(item.card, slot);\r\n        }\r\n\r\n        return {\r\n          place: star,\r\n          name: name,\r\n        };\r\n      },\r\n      collect: (monitor) => ({\r\n        isOver: !!monitor.isOver(),\r\n        // canDrop:!!monitor.canDrop()\r\n      }),\r\n    }), [x, y]\r\n  );\r\n\r\n  const isActiveSlot = isOver;\r\n  let borderColor = \"transparent\";\r\n\r\n  if (isActiveSlot) {\r\n    borderColor = \"red\";\r\n  } else if (canDrop && isActive) {\r\n    borderColor = \"white\";\r\n  };\r\n\r\n  return (\r\n    <SlotView\r\n      ref={dropRef}\r\n      className={card.Name}\r\n      y={p.y - 0}\r\n      x={18 + p.x}\r\n      isOver={isOver}\r\n      style={{ borderColor: borderColor }}\r\n      // style={isOver && !isActive ?{borderColor: 'white'}:{borderColor: 'transparent'}}\r\n    />\r\n    //  <SlotView ref={dropRef} className={name} y={p.y - 94} x={18 + p.x} isOver={isOver} />\r\n  );\r\n});\r\n\r\nexport default observer(StarView);\r\n"]},"metadata":{},"sourceType":"module"}